/* Optional: make Minimal Mistakes masthead glassy (single overlay) */
/* Keep outer containers transparent to avoid stacked tints */
.masthead, .site-header, .greedy-nav, .greedy-nav .hidden-links {
  background-color: transparent !important;
  box-shadow: none;
}

/* Inner wrap stays transparent; blur/tint live on .masthead */
.masthead__inner-wrap {
  padding-left: .75rem;
  padding-right: .75rem;
  background: transparent !important;
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  box-shadow: none;
  border: 0;
}

/* Remove underline/box effects from greedy containers */
.masthead .masthead__menu,
.masthead .greedy-nav {
  background: transparent !important;
  box-shadow: none;
  border: 0;
}

/* Bolder masthead and dropdown links for readability */
.masthead .greedy-nav a { font-weight: 700; letter-spacing: .01em; }
.masthead .greedy-nav .hidden-links a { font-weight: 700; }
.masthead .site-title,
.masthead .site-title a { font-weight: 800; }

/* Sticky masthead with glass following on scroll */
.masthead {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  z-index: 1000; /* above content so blur overlays text */
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  backdrop-filter: blur(8px) saturate(120%);
  background-color: var(--header-glass-bg) !important; /* theme-aware */
  border-bottom: 1px solid var(--glass-border);
  box-shadow: 0 8px 26px rgba(0,0,0,.22);
}

/* Frosted hamburger dropdown (Greedy Nav hidden links) */
/* Hidden links panel as frosted dropdown when visible */
.masthead .greedy-nav { position: relative; }
.masthead .greedy-nav .hidden-links {
  /* Theme-responsive panel with ~30% transparency */
  background: var(--menu-panel-bg, var(--c-surface)) !important; /* fallback */
  background: color-mix(in srgb, var(--menu-panel-bg, var(--c-surface)) 70%, transparent) !important;
  box-shadow: none;
  border: 1px solid var(--c-border);
  border-radius: var(--r-md);
}
.masthead .greedy-nav .hidden-links:not(.hidden) {
  position: absolute; top: calc(100% + 8px); right: .75rem; display: flex; flex-direction: column;
  gap: .25rem; padding: .5rem; border-radius: var(--r-md);
  -webkit-backdrop-filter: none; /* remove frosted effect to keep text crisp */
  backdrop-filter: none;
  background-color: var(--menu-panel-bg, var(--c-surface)) !important;
  border: 1px solid var(--c-border);
  box-shadow: 0 12px 32px rgba(0,0,0,.20);
}

/* Hidden-links caret colors to match panel */
.masthead .greedy-nav .hidden-links::before { border-color: var(--c-border) transparent !important; }
.masthead .greedy-nav .hidden-links::after  { border-color: var(--menu-panel-bg, var(--c-surface)) transparent !important; }

.masthead .greedy-nav .hidden-links a:hover,
.masthead .greedy-nav .hidden-links a:focus {
  background: color-mix(in srgb, var(--c-link) 10%, transparent);
  text-decoration: none;
  box-shadow: none;
}

@supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {
  .masthead .greedy-nav .hidden-links {
    background-color: var(--menu-panel-bg, var(--c-surface)) !important;
    box-shadow: 0 12px 28px rgba(0,0,0,.25);
  }
}

/* Subtle halo to improve link legibility over scrolled content */
.greedy-nav a,
.site-title,
.site-title a {
  text-shadow: 0 1px 1px rgba(0,0,0,.25), 0 0 1px rgba(0,0,0,.22);
  /* Ensure no stroke in light theme */
  -webkit-text-stroke: 0;
}

[data-theme='dark'] .greedy-nav a,
[data-theme='dark'] .site-title,
[data-theme='dark'] .site-title a {
  text-shadow: 0 1px 1px rgba(0,0,0,.4), 0 0 1px rgba(0,0,0,.35);
}

/* Thin stroke around masthead and dropdown links (dark theme) */
[data-theme='dark'] .masthead .greedy-nav a,
[data-theme='dark'] .masthead .greedy-nav .hidden-links a,
[data-theme='dark'] .masthead .site-title,
[data-theme='dark'] .masthead .site-title a {
  -webkit-text-stroke: 0.1px rgba(0,0,0,.15);
}

/* Ensure hidden menu link colors are readable against panel */
/* Match masthead link color tokens per theme */
.masthead .greedy-nav .hidden-links a { color: var(--c-link) !important; }
.masthead .greedy-nav .hidden-links a:hover { color: var(--c-link-hover) !important; }

/* Remove global screen overlay when hamburger is open */
.greedy-nav__toggle::before { background-color: transparent !important; }
.greedy-nav__toggle.close::before { opacity: 0 !important; pointer-events: none !important; }
